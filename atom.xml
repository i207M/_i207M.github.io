<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://i207M.github.io</id>
    <title>i207M&apos;s Fantastic Blog</title>
    <updated>2020-08-02T02:44:05.234Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://i207M.github.io"/>
    <link rel="self" href="https://i207M.github.io/atom.xml"/>
    <subtitle>Lover - ä¸–ç•Œéƒ½æ˜¯æˆ‘</subtitle>
    <logo>https://i207M.github.io/images/avatar.png</logo>
    <icon>https://i207M.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, i207M&apos;s Fantastic Blog</rights>
    <entry>
        <title type="html"><![CDATA[Pythonå­¦ä¹ ç¬”è®°]]></title>
        <id>https://i207M.github.io/post/python-xue-xi-bi-ji/</id>
        <link href="https://i207M.github.io/post/python-xue-xi-bi-ji/">
        </link>
        <updated>2020-07-31T09:25:07.000Z</updated>
        <content type="html"><![CDATA[<p>Learn from <a href="https://www.liaoxuefeng.com/wiki/1016959663602400">this</a></p>
<h2 id="2020731">2020.7.31</h2>
<h3 id="å®¹å™¨åˆå§‹åŒ–">å®¹å™¨åˆå§‹åŒ–</h3>
<pre><code>list:[]
tuple:()
dict:{:}
set:{}
</code></pre>
<h3 id="å‡½æ•°å‚æ•°">å‡½æ•°å‚æ•°</h3>
<p>ä½ç½®å‚æ•°<br>
é»˜è®¤å‚æ•°ï¼šé»˜è®¤å‚æ•°å¿…é¡»æŒ‡å‘ä¸å˜å¯¹è±¡ï¼é»˜è®¤å‚æ•°çš„å€¼æ˜¯åœ¨å‡½æ•°æ„å»ºæ—¶è¢«å®šä¹‰çš„ã€‚å¯ä»¥å•ç‹¬å®šä¹‰æŸä¸ªé»˜è®¤å‚æ•°çš„å€¼ï¼š</p>
<pre><code class="language-python">def enroll(a, b, c=1, d=2):
    print(a, b, c, d)

enroll(1, 2, d=5) # output: 1 2 1 5
</code></pre>
<h3 id="å¯å˜å‚æ•°">å¯å˜å‚æ•°</h3>
<p>å¯ä»¥ä¼ å…¥ä¸€ä¸ª<code>tuple</code>æ¥è§£å†³</p>
<pre><code class="language-python">def calc(numbers):
    sum = 0
    for n in numbers:
        sum = sum + n * n
    return sum

&gt;&gt;&gt; calc((1,2,3)) # æ­¤å¤„è¦ç”¨åŒå±‚æ‹¬å·
14
</code></pre>
<pre><code class="language-python">def calc(*numbers):
    sum = 0
    for n in numbers:
        sum = sum + n * n
    return sum

&gt;&gt;&gt; calc(1, 2)
5
&gt;&gt;&gt; calc()
0
&gt;&gt;&gt; nums = [1, 2, 3]
&gt;&gt;&gt; calc(*nums)
14
</code></pre>
<p><code>*</code>çš„ä½œç”¨æ˜¯å°†tupleçš„å†…å®¹æ‹†æˆä¸€ä¸ªä¸ªå‚æ•°ç„¶åä¼ å…¥ã€‚</p>
<h3 id="å…³é”®å­—å‚æ•°">å…³é”®å­—å‚æ•°</h3>
<p>å¯å˜å‚æ•°å…è®¸ä½ ä¼ å…¥0ä¸ªæˆ–ä»»æ„ä¸ªå‚æ•°ï¼Œè¿™äº›å¯å˜å‚æ•°åœ¨å‡½æ•°è°ƒç”¨æ—¶è‡ªåŠ¨ç»„è£…ä¸ºä¸€ä¸ª<strong>tuple</strong>ã€‚è€Œå…³é”®å­—å‚æ•°å…è®¸ä½ ä¼ å…¥0ä¸ªæˆ–ä»»æ„ä¸ªå«å‚æ•°åçš„å‚æ•°ï¼Œè¿™äº›å…³é”®å­—å‚æ•°åœ¨å‡½æ•°å†…éƒ¨è‡ªåŠ¨ç»„è£…ä¸ºä¸€ä¸ª<strong>dict</strong>ã€‚</p>
<pre><code class="language-python">def person(name, age, **kw):
    print('name:', name, 'age:', age, 'other:', kw)

&gt;&gt;&gt; person('Adam', 45, gender='M', job='Engineer')
name: Adam age: 45 other: {'gender': 'M', 'job': 'Engineer'}
            
&gt;&gt;&gt; extra = {'city': 'Beijing', 'job': 'Engineer'}
&gt;&gt;&gt; person('Jack', 24, **extra)
name: Jack age: 24 other: {'city': 'Beijing', 'job': 'Engineer'}
</code></pre>
<h3 id="å‘½åå…³é”®å­—å‚æ•°">å‘½åå…³é”®å­—å‚æ•°</h3>
<p>é™åˆ¶å…³é”®å­—å‚æ•°çš„åå­—ã€‚</p>
<pre><code class="language-python">def person(name, age, *, city, job):
    print(name, age, city, job)
    
&gt;&gt;&gt; person('Jack', 24, city='Beijing', job='Engineer')
Jack 24 Beijing Engineer
</code></pre>
<p>å‘½åå…³é”®å­—å‚æ•°å¿…é¡»ä¼ å…¥å‚æ•°åï¼›å‘½åå…³é”®å­—å‚æ•°å¯ä»¥æœ‰ç¼ºçœå€¼ã€‚</p>
<p>å¦‚æœå‡½æ•°å®šä¹‰ä¸­å·²ç»æœ‰äº†ä¸€ä¸ªå¯å˜å‚æ•°ï¼Œåé¢è·Ÿç€çš„å‘½åå…³é”®å­—å‚æ•°å°±ä¸å†éœ€è¦ä¸€ä¸ªç‰¹æ®Šåˆ†éš”ç¬¦<code>*</code>äº†ã€‚</p>
<h3 id="å‚æ•°ç»„åˆ">å‚æ•°ç»„åˆ</h3>
<p>å‚æ•°å®šä¹‰çš„é¡ºåºå¿…é¡»æ˜¯ï¼šå¿…é€‰å‚æ•°ã€é»˜è®¤å‚æ•°ã€å¯å˜å‚æ•°ã€å‘½åå…³é”®å­—å‚æ•°å’Œå…³é”®å­—å‚æ•°ã€‚</p>
<p>ä½¿ç”¨<code>*args</code>å’Œ<code>**kw</code>æ˜¯Pythonçš„ä¹ æƒ¯å†™æ³•ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç”¨å…¶ä»–å‚æ•°åï¼Œä½†æœ€å¥½ä½¿ç”¨ä¹ æƒ¯ç”¨æ³•ã€‚</p>
<h3 id="åˆ‡ç‰‡">åˆ‡ç‰‡</h3>
<p><code>s[L:R:D]</code>è¡¨ç¤ºå°†sçš„<code>[L,R)</code>é—´è·ä¸ºDçš„ç‰‡æ®µåˆ‡ä¸‹æ¥</p>
<p>ç‰¹åˆ«çš„ï¼Œ<code>s[:2]</code> è¡¨ç¤ºåˆ‡<code>s</code>çš„å‰ä¸¤ä¸ªå…ƒç´ ï¼›<code>s[-2:]</code>è¡¨ç¤ºåˆ‡<code>s</code>çš„åä¸¤ä¸ªå…ƒç´ ã€‚</p>
<h3 id="è¿­ä»£">è¿­ä»£</h3>
<pre><code class="language-python">d = {'a': 1, 'b': 2, 'c': 3}
for key in d:
    print(key)
for val in d.values():
    print(val)
for it in d.items():
    print(it)
</code></pre>
<p>å¦‚æœè¦å¯¹listå®ç°ç±»ä¼¼Javaé‚£æ ·çš„ä¸‹æ ‡å¾ªç¯æ€ä¹ˆåŠï¼ŸPythonå†…ç½®çš„<code>enumerate</code>å‡½æ•°å¯ä»¥æŠŠä¸€ä¸ªlistå˜æˆç´¢å¼•-å…ƒç´ å¯¹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨<code>for</code>å¾ªç¯ä¸­åŒæ—¶è¿­ä»£ç´¢å¼•å’Œå…ƒç´ æœ¬èº«ï¼š</p>
<pre><code class="language-python">for i, val in enumerate(['a', 'b', 'c']):
    print(i, val)
    
0 A
1 B
2 C

for x, y in [(1, 1), (2, 4), (3, 9)]:
	print(x, y)
</code></pre>
<h3 id="åˆ—è¡¨ç”Ÿæˆå¼">åˆ—è¡¨ç”Ÿæˆå¼</h3>
<p>æ„Ÿè§‰å¾ˆå¥½ç”¨ï¼</p>
<pre><code class="language-python">L = list(range(1, 11))
L = [x * x for x in range(1, 11) if x % 2 == 0]
L = [m + n for m in ['a', 'b', 'c'] for n in ['x', 'y', 'z']]
</code></pre>
<h4 id="ifelsefor">if,else,for</h4>
<pre><code class="language-python">&gt;&gt;&gt; [x if x % 2 == 0 else -x for x in range(1, 11)]
[-1, 2, -3, 4, -5, 6, -7, 8, -9, 10]
</code></pre>
<p>åœ¨ä¸€ä¸ªåˆ—è¡¨ç”Ÿæˆå¼ä¸­ï¼Œ<code>for</code>å‰é¢çš„<code>if ... else</code>æ˜¯è¡¨è¾¾å¼ï¼Œè€Œ<code>for</code>åé¢çš„<code>if</code>æ˜¯è¿‡æ»¤æ¡ä»¶ï¼Œä¸èƒ½å¸¦<code>else</code>ã€‚</p>
<h3 id="ç”Ÿæˆå™¨">ç”Ÿæˆå™¨</h3>
<p>ç®€å•çš„ç”Ÿæˆå™¨ç›¸å½“äºæŠŠlistæ¢æˆtupleã€‚ç”Ÿæˆå™¨åªæœ‰nextæ–¹å¼è°ƒå‡ºä¸‹ä¸€ä¸ªï¼Œä¸èƒ½éšæœºè®¿é—®ã€‚å¯ä»¥ç”¨foréå†ã€‚</p>
<pre><code class="language-python">g = (x * x for x in range(10))
print(next(g))
for x in g:
    print(x, end=' ')

0
1 4 9 16 25 36 49 64 81

# æ–æ³¢é‚£å¥‘æ•°åˆ—ç”Ÿæˆå™¨
def fib():
    a, b = 0, 1
    while True:
        yield b # ï¼ï¼ï¼
        a, b = b, a + b


f = fib()
for x in f:
    print(x)
    input()
</code></pre>
<p>å˜æˆgeneratorçš„å‡½æ•°ï¼Œåœ¨æ¯æ¬¡è°ƒç”¨<code>next()</code>çš„æ—¶å€™æ‰§è¡Œï¼Œé‡åˆ°<code>yield</code>è¯­å¥è¿”å›ï¼Œå†æ¬¡æ‰§è¡Œæ—¶ä»ä¸Šæ¬¡è¿”å›çš„<code>yield</code>è¯­å¥å¤„ç»§ç»­æ‰§è¡Œã€‚</p>
<p>generatorå‡½æ•°ä¹Ÿå¯ä»¥æœ‰è¿”å›å€¼ã€‚å¦‚æœæƒ³è¦æ‹¿åˆ°è¿”å›å€¼ï¼Œå¿…é¡»æ•è·<code>StopIteration</code>é”™è¯¯ï¼Œè¿”å›å€¼åŒ…å«åœ¨<code>StopIteration</code>çš„<code>value</code>ä¸­ã€‚</p>
<pre><code class="language-python">def triangles():
    A = []
    while True:
        for i in range(len(A) - 1, 0, -1):
            A[i] += A[i - 1]
        A.append(1)
        yield list(A)
</code></pre>
<p>ä»¥ä¸Šæ˜¯ç”Ÿæˆæ¨è¾‰ä¸‰è§’çš„ç”Ÿæˆå™¨ï¼Œå€¼å¾—æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå‡½æ•°å¦‚æœç›´æ¥è¿”å›Aï¼Œé‚£ä¹ˆåœ¨å‡½æ•°é‡ŒAçš„å€¼æ”¹å˜çš„è¯ï¼Œå¯¼å‡ºçš„Açš„å€¼ä¹Ÿä¼šå˜ã€‚</p>
<p>æ”¹è¿›ç‰ˆï¼š</p>
<pre><code class="language-python">def triangles():
    A = [1]
    yield A
    while True:
        A = [1] + [A[i] + A[i + 1] for i in range(len(A) - 1)] + [1]
        yield A
</code></pre>
<p>ä¸ºä»€ä¹ˆè¿™æ ·å°±å¯ä»¥è¿”å›Aäº†å‘¢ï¼Œå› ä¸ºæ¯ç»è¿‡ä¸€æ¬¡èµ‹å€¼æ“ä½œï¼ŒAçš„åœ°å€éƒ½ä¼šé‡æ–°åˆ†é…ã€‚</p>
<h2 id="81">8.1</h2>
<h3 id="mapreduce">map&amp;reduce</h3>
<p>æˆ‘ä»¬å…ˆçœ‹mapã€‚<code>map()</code>å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯å‡½æ•°ï¼Œä¸€ä¸ªæ˜¯<code>Iterable</code>ï¼Œ<code>map</code>å°†ä¼ å…¥çš„å‡½æ•°ä¾æ¬¡ä½œç”¨åˆ°åºåˆ—çš„æ¯ä¸ªå…ƒç´ ï¼Œå¹¶æŠŠç»“æœä½œä¸ºæ–°çš„<code>Iterator</code>è¿”å›ã€‚</p>
<pre><code class="language-python">def f(x):
	return x * x

&gt;&gt;&gt; r = map(f, [1, 2, 3, 4, 5, 6, 7, 8, 9])
&gt;&gt;&gt; list(r)
[1, 4, 9, 16, 25, 36, 49, 64, 81]
</code></pre>
<p><code>reduce</code>æŠŠä¸€ä¸ªå‡½æ•°ä½œç”¨åœ¨ä¸€ä¸ªåºåˆ—<code>[x1, x2, x3, ...]</code>ä¸Šï¼Œè¿™ä¸ªå‡½æ•°å¿…é¡»æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œ<code>reduce</code>æŠŠç»“æœç»§ç»­å’Œåºåˆ—çš„ä¸‹ä¸€ä¸ªå…ƒç´ åšç´¯ç§¯è®¡ç®—ï¼Œå…¶æ•ˆæœå°±æ˜¯ï¼š</p>
<pre><code>reduce(f, [x1, x2, x3, x4]) = f(f(f(x1, x2), x3), x4)
</code></pre>
<p>æ¯”æ–¹è¯´å¯¹ä¸€ä¸ªåºåˆ—æ±‚å’Œï¼Œå°±å¯ä»¥ç”¨<code>reduce</code>å®ç°ï¼š</p>
<pre><code class="language-python">from functools import reduce
def add(x, y):
	return x + y

&gt;&gt;&gt; reduce(add, [1, 3, 5, 7, 9])
25
</code></pre>
<p>åˆ©ç”¨æ­¤æ–¹æ³•å¯ä»¥æ–¹ä¾¿çš„å®ç°strè½¬intï¼š</p>
<pre><code class="language-python">def str2int(s):
    def fn(x, y):
        return x * 10 + y
    def char2num(s):
        return DIGITS[s]
    return reduce(fn, map(char2num, s))

# lambda

def char2num(s):
    return DIGITS[s]

def str2int(s):
    return reduce(lambda x, y: x * 10 + y, map(char2num, s))

# str2float

def str2float(s):
    def merge(x, y):
        return x * 10 + y

    def str2num(s):
        return reduce(merge, map(int, s))

    p = 0
    while p &lt; len(s) and s[p] != '.':
        p += 1
    if p == len(s):
        return str2num(s)
    return str2num(s[:p]) + str2num(s[p + 1:]) * 0.1**(len(s) - p - 1)

# å†™çš„è¿˜æ˜¯å¤ªé•¿ï¼Œç­‰å­¦ä¼šlambdaå’Œstrçš„å‡½æ•°å†ç®€åŒ–å§
</code></pre>
<h3 id="filter">filter</h3>
<p>æ¥æ”¶ä¸€ä¸ªå‡½æ•°å’Œä¸€ä¸ªåºåˆ—ï¼Œè¿”å›ä¸€ä¸ªIteratorï¼Œåªä¿ç•™Trueçš„å…ƒç´ ã€‚</p>
<pre><code class="language-python">def is_palindrome(n):
    s = str(n)
    return s == s[::-1]
</code></pre>
<p>ç­›å›æ–‡å¥½ç®€å•...</p>
<h3 id="sorted">sorted</h3>
<p>æˆ‘ä»¬ç»™<code>sorted</code>ä¼ å…¥keyå‡½æ•°ï¼Œå³å¯å®ç°å¿½ç•¥å¤§å°å†™çš„æ’åºï¼š</p>
<pre><code class="language-python">&gt;&gt;&gt; sorted(['bob', 'about', 'Zoo', 'Credit'], key=str.lower)
['about', 'bob', 'Credit', 'Zoo']
</code></pre>
<p>è¦è¿›è¡Œåå‘æ’åºï¼Œä¸å¿…æ”¹åŠ¨keyå‡½æ•°ï¼Œå¯ä»¥ä¼ å…¥ç¬¬ä¸‰ä¸ªå‚æ•°<code>reverse=True</code>ï¼š</p>
<pre><code class="language-python">&gt;&gt;&gt; sorted(['bob', 'about', 'Zoo', 'Credit'], key=str.lower, reverse=True)
['Zoo', 'Credit', 'bob', 'about']
</code></pre>
<h3 id="é—­åŒ…">é—­åŒ…</h3>
<p>å¤§æ€å™¨ã€‚ç±»ä¼¼äºC++ä¸­çš„lamba.</p>
<p>è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°ä¼šåŒæ—¶åŒ…å«å®ƒæ‰€éœ€è¦çš„å˜é‡ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„é—®é¢˜ï¼š</p>
<p>è¿”å›çš„å‡½æ•°æ²¡æœ‰ç«‹å³æ‰§è¡Œï¼Œè€Œæ˜¯ç­‰åˆ°è°ƒç”¨æ‰æ‰§è¡Œã€‚ <strong>è¿”å›é—­åŒ…æ—¶ç‰¢è®°ä¸€ç‚¹ï¼šè¿”å›å‡½æ•°ä¸è¦å¼•ç”¨ä»»ä½•å¾ªç¯å˜é‡ï¼Œæˆ–è€…åç»­ä¼šå‘ç”Ÿå˜åŒ–çš„å˜é‡ã€‚</strong></p>
<p>å¦‚æœä¸€å®šè¦å¼•ç”¨å¾ªç¯å˜é‡æ€ä¹ˆåŠï¼Ÿæ–¹æ³•æ˜¯å†åˆ›å»ºä¸€ä¸ªå‡½æ•°ï¼Œç”¨è¯¥å‡½æ•°çš„å‚æ•°ç»‘å®šå¾ªç¯å˜é‡å½“å‰çš„å€¼ï¼Œæ— è®ºè¯¥å¾ªç¯å˜é‡åç»­å¦‚ä½•æ›´æ”¹ï¼Œå·²ç»‘å®šåˆ°å‡½æ•°å‚æ•°çš„å€¼ä¸å˜ï¼š</p>
<pre><code class="language-python">def count():
    def f(j):
        def g():
            return j*j
        return g
    fs = []
    for i in range(1, 4):
        fs.append(f(i)) # f(i)ç«‹åˆ»è¢«æ‰§è¡Œï¼Œå› æ­¤içš„å½“å‰å€¼è¢«ä¼ å…¥f()
    return fs
</code></pre>
<h4 id="åˆ›å»ºè®¡æ•°å™¨">åˆ›å»ºè®¡æ•°å™¨</h4>
<p>è¿™é“é¢˜å¾ˆå¦™å•Šã€‚</p>
<pre><code class="language-python">def createCounter():
    n = 0

    def counter():
        nonlocal n # å£°æ˜è¿™æ˜¯å¤–å±‚çš„å˜é‡
        n += 1
        return n

    return counter

def createCounter():
    n = [0]

    def counter():
        n[0] += 1 # ä¸ºä»€ä¹ˆè¿™é‡Œå¯ä»¥ä¿®æ”¹ï¼Ÿå› ä¸ºnè¿™ä¸ªå˜é‡å®é™…ä¸Šæ˜¯æŒ‡å‘ä¸€ç‰‡å†…å­˜åœ°å€ï¼
        return n[0]

    return counter
</code></pre>
<h3 id="åŒ¿åå‡½æ•°">åŒ¿åå‡½æ•°</h3>
<p>å…³é”®å­—<code>lambda</code>è¡¨ç¤ºåŒ¿åå‡½æ•°ï¼Œå†’å·å‰é¢çš„<code>x</code>è¡¨ç¤ºå‡½æ•°å‚æ•°ï¼Œå†’å·åé¢çš„è¡¨è¾¾å¼æ˜¯è¿”å›å€¼ã€‚</p>
<h3 id="è£…é¥°å™¨">è£…é¥°å™¨</h3>
<p>å‡½æ•°å¯¹è±¡æœ‰ä¸€ä¸ª<code>__name__</code>å±æ€§ï¼Œå¯ä»¥æ‹¿åˆ°å‡½æ•°çš„åå­—ï¼š</p>
<pre><code class="language-python">&gt;&gt;&gt; f=now
&gt;&gt;&gt; now.__name__
'now'
&gt;&gt;&gt; f.__name__
'now'
</code></pre>
<p>å‡è®¾æˆ‘ä»¬è¦åœ¨<code>now</code>å‡½æ•°è°ƒç”¨å‰åè‡ªåŠ¨æ‰“å°æ—¥å¿—ï¼Œä½†åˆä¸å¸Œæœ›ä¿®æ”¹<code>now()</code>å‡½æ•°çš„å®šä¹‰ï¼Œè¿™ç§åœ¨ä»£ç è¿è¡ŒæœŸé—´åŠ¨æ€å¢åŠ åŠŸèƒ½çš„æ–¹å¼ï¼Œç§°ä¹‹ä¸ºâ€œè£…é¥°å™¨â€ã€‚</p>
<p>æœ¬è´¨ä¸Šï¼Œdecoratorå°±æ˜¯ä¸€ä¸ªè¿”å›å‡½æ•°çš„é«˜é˜¶å‡½æ•°ï¼Œå¯ä»¥å®šä¹‰å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python">def log(func):
    def wrapper(*args, **kw):
        print('call %s():' % func.__name__)
        return func(*args, **kw)
    return wrapper
</code></pre>
<p>æˆ‘ä»¬å¯ä»¥å€ŸåŠ©Pythonçš„@è¯­æ³•ï¼ŒæŠŠdecoratorç½®äºå‡½æ•°çš„å®šä¹‰å¤„ï¼š</p>
<pre><code class="language-python">@log
def now():
    pass
</code></pre>
<p>è°ƒç”¨<code>now()</code>å‡½æ•°ï¼Œä¸ä»…ä¼šè¿è¡Œ<code>now()</code>å‡½æ•°æœ¬èº«ï¼Œè¿˜ä¼šåœ¨è¿è¡Œ<code>now()</code>å‡½æ•°å‰æ‰“å°ä¸€è¡Œæ—¥å¿—ã€‚</p>
<p>æŠŠ<code>@log</code>æ”¾åˆ°<code>now()</code>å‡½æ•°çš„å®šä¹‰å¤„ï¼Œç›¸å½“äºæ‰§è¡Œäº†è¯­å¥ï¼š</p>
<pre><code class="language-python">now = log(now)
</code></pre>
<p><code>wrapper()</code>å‡½æ•°çš„å‚æ•°å®šä¹‰æ˜¯<code>(*args, **kw)</code>ï¼Œå› æ­¤ï¼Œ<code>wrapper()</code>å‡½æ•°å¯ä»¥æ¥å—ä»»æ„å‚æ•°çš„è°ƒç”¨ã€‚</p>
<p>decorateræœ¬èº«ä¹Ÿå¯ä»¥ä¼ å…¥å‚æ•°ï¼š</p>
<p>æ¯”å¦‚ï¼Œè¦è‡ªå®šä¹‰logçš„æ–‡æœ¬ï¼š</p>
<pre><code class="language-python">def log(text):
    def decorator(func):
        def wrapper(*args, **kw):
            print('%s %s():' % (text, func.__name__))
            return func(*args, **kw)
        return wrapper
    return decorator
</code></pre>
<p>è¿™ä¸ª3å±‚åµŒå¥—çš„decoratorç”¨æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python">@log('execute')
def now():
    pass
</code></pre>
<p>ä½†æ˜¯ï¼Œè¿™æ ·è£…é¥°ä¹‹åçš„ å‡½æ•°ï¼Œå®ƒçš„<code>__name__</code>å·²ç»ä¸æ˜¯åŸæ¥çš„å‡½æ•°äº†ã€‚Pythonå†…ç½®çš„<code>functools.wraps</code>å°±æ˜¯å¹²è¿™ä¸ªäº‹çš„ï¼Œæ‰€ä»¥ï¼Œä¸€ä¸ªå®Œæ•´çš„decoratorçš„å†™æ³•å¦‚ä¸‹ï¼š</p>
<pre><code class="language-python">import functools

def log(func):
    @functools.wraps(func) # !!!
    def wrapper(*args, **kw):
        print('call %s():' % func.__name__)
        return func(*args, **kw)
    return wrapper
</code></pre>
<p>è¯·è®¾è®¡ä¸€ä¸ªdecoratorï¼Œå®ƒå¯ä½œç”¨äºä»»ä½•å‡½æ•°ä¸Šï¼Œå¹¶æ‰“å°è¯¥å‡½æ•°çš„æ‰§è¡Œæ—¶é—´ï¼š</p>
<pre><code class="language-python">def metric(fn):
    @functools.wraps(fn)
    def warpper(*args, **kw):
        s = time.time()
        r = fn(*args, **kw)
        e = time.time()
        print('%s run in %.2f ms' % (fn.__name__, e - s))
        return r

    return warpper
</code></pre>
<h3 id="åå‡½æ•°">åå‡½æ•°</h3>
<pre><code class="language-python">int2 = functools.partial(int, base=2)
</code></pre>
<p>å›ºå®šå‡½æ•°çš„å‚æ•°ã€‚</p>
<h2 id="82">8.2</h2>
<h3 id="æ¨¡å—">æ¨¡å—</h3>
<pre><code class="language-python">'A module'  # ä»»ä½•æ¨¡å—ä»£ç çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²éƒ½è¢«è§†ä¸ºæ¨¡å—çš„æ–‡æ¡£æ³¨é‡Šï¼Œå¯ä»¥ç”¨__doc__è°ƒç”¨

__author__ = 'i207M' # æ ‡å‡†æ¨¡æ¿

import sys


def run():
    print(sys.argv) # sysæ¨¡å—å®šä¹‰äº†sys.argvï¼Œæœ¬è´¨æ˜¯listï¼Œå‚¨å­˜äº†è°ƒç”¨è¿™ä¸ªpyæ–‡ä»¶çš„å‚æ•°


if __name__ == '__main__': # å½“ä¸”ä»…å½“å®ƒæ˜¯ç‹¬ç«‹è¿è¡Œè€Œä¸æ˜¯è¢«importè¿›åˆ«çš„pyæ—¶ï¼Œæ­¤åˆ¤æ–­ä¸ºTrue
    run()
</code></pre>
<p>è¿è¡Œ<code>python3 hello.py</code>è·å¾—çš„<code>sys.argv</code>å°±æ˜¯<code>['hello.py']</code>ï¼›</p>
<p>è¿è¡Œ<code>python3 hello.py Michael</code>è·å¾—çš„<code>sys.argv</code>å°±æ˜¯<code>['hello.py', 'Michael']</code>ã€‚</p>
<h4 id="ä½œç”¨åŸŸ">ä½œç”¨åŸŸ</h4>
<p>æ­£å¸¸å‡½æ•°çš„å‘½åæ˜¯å…¬å¼€çš„ã€‚</p>
<p>ç±»ä¼¼<code>__xxx__</code>è¿™æ ·çš„å˜é‡æ˜¯ç‰¹æ®Šå˜é‡ï¼Œå¯ä»¥è¢«ç›´æ¥å¼•ç”¨ï¼Œä½†æ˜¯æœ‰ç‰¹æ®Šç”¨é€”ï¼Œå¦‚<code>__author__</code>ï¼Œ<code>__name__</code>ï¼Œ<code>__doc__</code>ã€‚</p>
<p>ç±»ä¼¼<code>_xxx</code>å’Œ<code>__xxx</code>è¿™æ ·çš„å‡½æ•°æˆ–å˜é‡å°±æ˜¯éå…¬å¼€çš„ï¼Œä¸åº”è¯¥è¢«ç›´æ¥å¼•ç”¨ã€‚ä¸åº”è¯¥ï¼Œä¸æ˜¯ä¸èƒ½ã€‚</p>
<h3 id="é¢å‘å¯¹è±¡oop">é¢å‘å¯¹è±¡OOP</h3>
<p><code>__init__</code>æ–¹æ³•ç›¸å½“äºæ„é€ å‡½æ•°ã€‚æ³¨æ„åˆ°<code>__init__</code>æ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°æ°¸è¿œæ˜¯<code>self</code>ï¼Œè¡¨ç¤ºåˆ›å»ºçš„å®ä¾‹æœ¬èº«ã€‚</p>
<p>å¦‚æœè¦è®©å†…éƒ¨å±æ€§ä¸è¢«å¤–éƒ¨è®¿é—®ï¼Œå¯ä»¥æŠŠå±æ€§çš„åç§°å‰åŠ ä¸Šä¸¤ä¸ªä¸‹åˆ’çº¿<code>__</code>ï¼Œè¿™æ ·åœ¨å¤–éƒ¨å°±çœŸçš„æ— æ³•è®¿é—®ã€‚ä½†æ˜¯åœ¨å¤–éƒ¨å®šä¹‰classçš„<code>__</code>å¼€å¤´çš„å˜é‡æ˜¯å¯ä»¥è¢«è®¿é—®çš„ã€‚</p>
<p>åœ¨Pythonä¸­ï¼Œå˜é‡åç±»ä¼¼<code>__xxx__</code>çš„ï¼Œä¹Ÿå°±æ˜¯ä»¥åŒä¸‹åˆ’çº¿å¼€å¤´ï¼Œå¹¶ä¸”ä»¥åŒä¸‹åˆ’çº¿ç»“å°¾çš„ï¼Œæ˜¯ç‰¹æ®Šå˜é‡ï¼Œç‰¹æ®Šå˜é‡æ˜¯å¯ä»¥ç›´æ¥è®¿é—®çš„ï¼Œä¸æ˜¯privateå˜é‡ï¼Œæ‰€ä»¥ï¼Œä¸èƒ½ç”¨<code>__name__</code>ã€<code>__score__</code>è¿™æ ·çš„å˜é‡åã€‚</p>
<p>æœ‰äº›æ—¶å€™ï¼Œä½ ä¼šçœ‹åˆ°ä»¥ä¸€ä¸ªä¸‹åˆ’çº¿å¼€å¤´çš„å®ä¾‹å˜é‡åï¼Œæ¯”å¦‚<code>_name</code>ï¼Œè¿™æ ·çš„å®ä¾‹å˜é‡å¤–éƒ¨æ˜¯å¯ä»¥è®¿é—®çš„ï¼Œä½†æ˜¯ï¼ŒæŒ‰ç…§çº¦å®šä¿—æˆçš„è§„å®šï¼Œå½“ä½ çœ‹åˆ°è¿™æ ·çš„å˜é‡æ—¶ï¼Œæ„æ€å°±æ˜¯ï¼Œâ€œè™½ç„¶æˆ‘å¯ä»¥è¢«è®¿é—®ï¼Œä½†æ˜¯ï¼Œè¯·æŠŠæˆ‘è§†ä¸ºç§æœ‰å˜é‡ï¼Œä¸è¦éšæ„è®¿é—®â€ã€‚</p>
<p>è¿™å°±æ˜¯è‘—åçš„**â€œå¼€é—­â€åŸåˆ™**ï¼š</p>
<p>å¯¹æ‰©å±•å¼€æ”¾ï¼šå…è®¸æ–°å¢<code>Animal</code>å­ç±»ï¼›</p>
<p>å¯¹ä¿®æ”¹å°é—­ï¼šä¸éœ€è¦ä¿®æ”¹ä¾èµ–<code>Animal</code>ç±»å‹çš„<code>run_twice()</code>ç­‰å‡½æ•°ã€‚</p>
<p><em>â€œé¸­å­ç±»å‹â€ï¼šå®ƒå¹¶ä¸è¦æ±‚ä¸¥æ ¼çš„ç»§æ‰¿ä½“ç³»ï¼Œä¸€ä¸ªå¯¹è±¡åªè¦â€œçœ‹èµ·æ¥åƒé¸­å­ï¼Œèµ°èµ·è·¯æ¥åƒé¸­å­â€ï¼Œé‚£å®ƒå°±å¯ä»¥è¢«çœ‹åšæ˜¯é¸­å­ã€‚</em></p>
<h4 id="type">type</h4>
<p>typeè¿”å›ç±»å‹ï¼Œæ˜¯ä¸¥æ ¼çš„ç±»å‹ï¼ŒåŒä¸€ä¸ªçˆ¶ç±»ä¸‹çš„å­ç±»äº’ä¸ç›¸åŒã€‚</p>
<p>ä½¿ç”¨<code>instance()</code>å‡½æ•°å¯ä»¥åˆ¤æ–­ç»§æ‰¿ç±»å‹ã€‚</p>
<h3 id="ç±»å’Œå®ä¾‹">ç±»å’Œå®ä¾‹</h3>
<p>å®é™…ä¸Šï¼Œåœ¨<code>len()</code>å‡½æ•°å†…éƒ¨ï¼Œå®ƒè‡ªåŠ¨å»è°ƒç”¨è¯¥å¯¹è±¡çš„<code>__len__()</code>æ–¹æ³•ã€‚</p>
<p>é…åˆ<code>getattr()</code>ã€<code>setattr()</code>ä»¥åŠ<code>hasattr()</code>ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥æ“ä½œä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€ã€‚</p>
<p>ä¸ºäº†ç»Ÿè®¡å­¦ç”Ÿäººæ•°ï¼Œå¯ä»¥ç»™Studentç±»å¢åŠ ä¸€ä¸ªç±»å±æ€§ï¼Œæ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œè¯¥å±æ€§è‡ªåŠ¨å¢åŠ ï¼š</p>
<pre><code class="language-python">class Student(object):
    count = 0

    def __init__(self, name):
        self.name = name
        Student.count += 1 # æ–¹ä¾¿ï¼
</code></pre>
<h4 id="ç»™å®ä¾‹ç»‘å®šä¸€ä¸ªæ–¹æ³•">ç»™å®ä¾‹ç»‘å®šä¸€ä¸ªæ–¹æ³•</h4>
<pre><code class="language-python">&gt;&gt;&gt; def set_age(self, age): # å®šä¹‰ä¸€ä¸ªå‡½æ•°ä½œä¸ºå®ä¾‹æ–¹æ³•
...     self.age = age
...
&gt;&gt;&gt; from types import MethodType
&gt;&gt;&gt; s.set_age = MethodType(set_age, s) # ç»™å®ä¾‹ç»‘å®šä¸€ä¸ªæ–¹æ³•ï¼Œåªæœ‰sèƒ½è°ƒç”¨

&gt;&gt;&gt; def set_score(self, score):
...     self.score = score
...
&gt;&gt;&gt; Student.set_score = set_score # æ‰€æœ‰å®ä¾‹éƒ½å¯ä»¥è°ƒç”¨
</code></pre>
<p>Pythonå…è®¸åœ¨å®šä¹‰classçš„æ—¶å€™ï¼Œå®šä¹‰ä¸€ä¸ªç‰¹æ®Šçš„<code>__slots__</code>å˜é‡ï¼Œæ¥é™åˆ¶è¯¥classå®ä¾‹èƒ½æ·»åŠ çš„å±æ€§ï¼š</p>
<pre><code class="language-python">class Student(object):
    __slots__ = ('name', 'age') # ç”¨tupleå®šä¹‰å…è®¸ç»‘å®šçš„å±æ€§åç§°
</code></pre>
<p>å¯¹å­ç±»ä¸èµ·ä½œç”¨ï¼Œé™¤éåœ¨å­ç±»ä¸­ä¹Ÿå®šä¹‰<code>__slots__</code>ï¼Œè¿™æ ·ï¼Œå­ç±»å®ä¾‹å…è®¸å®šä¹‰çš„å±æ€§å°±æ˜¯è‡ªèº«çš„<code>__slots__</code>åŠ ä¸Šçˆ¶ç±»çš„<code>__slots__</code>ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[ç‰©è”ç½‘å¼€å‘ç¬”è®°]]></title>
        <id>https://i207M.github.io/post/iot-kai-fa-ru-men/</id>
        <link href="https://i207M.github.io/post/iot-kai-fa-ru-men/">
        </link>
        <updated>2020-07-30T14:28:23.000Z</updated>
        <content type="html"><![CDATA[<h2 id="2020730">2020.7.30</h2>
<p>THUé¢è¯•ç»“æŸï¼Œå¼€å§‹å¿ƒä»ªå·²ä¹…çš„IoTå¼€å‘å°è¯•ã€‚é¦–å…ˆä½¿ç”¨çš„æ˜¯ESP-8266ç³»åˆ—çš„ESP-01èŠ¯ç‰‡ã€‚<br>
ä¸Šåˆä¸»è¦æŠŠé©±åŠ¨å’ŒArduino IDEé¼“æ£å¥½äº†ï¼Œæ„Ÿè°¢æˆ‘çˆ¸äº‹å…ˆçš„å¼€è’ã€‚<br>
åæ¥èŠ±äº†å¥½é•¿æ—¶é—´å°è¯•ç‚¹ç¯ï¼ˆå°±æ˜¯è¿è¡ŒBlinkå®ä¾‹ï¼‰ï¼Œæ€ä¹ˆæ ·éƒ½ä¸èƒ½æˆåŠŸï¼Œåæ¥å‘ç°ESP-01Sæ‰æœ‰ç¯ï¼Œæˆ‘æ‰‹é‡Œè¿™ä¸ªæ²¡æœ‰...<br>
åæ¥åˆèŠ±äº†å¥½é•¿æ—¶é—´å°è¯•Advanced Webserverè¿™ä¸ªç¤ºä¾‹ï¼ŒåŒæ ·æ˜¯ä¸€ç›´æ— è§£ï¼Œç”šè‡³éƒ½ä»¥ä¸ºè‡ªå·±ä¸å°å¿ƒåˆ·åäº†WiFiæ¨¡å—...ç›´åˆ°æŠŠè¿™ä¸ªé—®é¢˜ç»™å°é»„é¸­ï¼ˆå®¶çˆ¶ï¼‰è¯´äº†ä¸€ä¸‹ï¼Œç„¶åçŒ›ç„¶æ„è¯†åˆ°ï¼ŒSSIDå’Œpasswordåº”è¯¥å¡«è‡ªå·±å®¶å·²æœ‰çš„WiFi...ç¿æ™ºäº†ç¿æ™ºäº†ï¼Œç„¶åå°±æˆåŠŸçš„è¿ä¸Šäº†WiFiå¹¶ä½œä¸ºæœåŠ¡å™¨è¿æ¥åˆ°äº†æˆ‘çš„å°æ¿å­ã€‚<br>
æ™šä¸Šå¼€å§‹é¼“æ£PlatformIOï¼Œä½†æ˜¯Uploadçš„æ—¶å€™æç¤ºTimed out waiting for packet headerï¼Œæ˜å¤©å†çœ‹å§ã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[å…³äº]]></title>
        <id>https://i207M.github.io/post/about/</id>
        <link href="https://i207M.github.io/post/about/">
        </link>
        <updated>2020-07-19T10:59:52.000Z</updated>
        <content type="html"><![CDATA[<p>i207ï¼­æ›¾ç»æ˜¯ä¸€ä½OIerï¼Œæ‹¥æœ‰NOI2019é“¶ç‰Œã€‚<br>
i207Mæ¯•ä¸šäºSJZEZã€‚</p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello Gridea]]></title>
        <id>https://i207M.github.io/post/hello-gridea/</id>
        <link href="https://i207M.github.io/post/hello-gridea/">
        </link>
        <updated>2018-12-11T16:00:00.000Z</updated>
        <summary type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
]]></summary>
        <content type="html"><![CDATA[<p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ <strong>Gridea</strong> ï¼<br>
âœï¸  <strong>Gridea</strong> ä¸€ä¸ªé™æ€åšå®¢å†™ä½œå®¢æˆ·ç«¯ã€‚ä½ å¯ä»¥ç”¨å®ƒæ¥è®°å½•ä½ çš„ç”Ÿæ´»ã€å¿ƒæƒ…ã€çŸ¥è¯†ã€ç¬”è®°ã€åˆ›æ„... ...</p>
<!-- more -->
<p><a href="https://github.com/getgridea/gridea">Github</a><br>
<a href="https://gridea.dev/">Gridea ä¸»é¡µ</a><br>
<a href="http://fehey.com/">ç¤ºä¾‹ç½‘ç«™</a></p>
<h2 id="ç‰¹æ€§">ç‰¹æ€§ğŸ‘‡</h2>
<p>ğŸ“  ä½ å¯ä»¥ä½¿ç”¨æœ€é…·çš„ <strong>Markdown</strong> è¯­æ³•ï¼Œè¿›è¡Œå¿«é€Ÿåˆ›ä½œ</p>
<p>ğŸŒ‰  ä½ å¯ä»¥ç»™æ–‡ç« é…ä¸Šç²¾ç¾çš„å°é¢å›¾å’Œåœ¨æ–‡ç« ä»»æ„ä½ç½®æ’å…¥å›¾ç‰‡</p>
<p>ğŸ·ï¸  ä½ å¯ä»¥å¯¹æ–‡ç« è¿›è¡Œæ ‡ç­¾åˆ†ç»„</p>
<p>ğŸ“‹  ä½ å¯ä»¥è‡ªå®šä¹‰èœå•ï¼Œç”šè‡³å¯ä»¥åˆ›å»ºå¤–éƒ¨é“¾æ¥èœå•</p>
<p>ğŸ’»  ä½ å¯ä»¥åœ¨ <strong>Windows</strong>ï¼Œ<strong>MacOS</strong> æˆ– <strong>Linux</strong> è®¾å¤‡ä¸Šä½¿ç”¨æ­¤å®¢æˆ·ç«¯</p>
<p>ğŸŒ  ä½ å¯ä»¥ä½¿ç”¨ <strong>ğ–¦ğ—‚ğ—ğ—ğ—ğ–» ğ–¯ğ–ºğ—€ğ–¾ğ—Œ</strong> æˆ– <strong>Coding Pages</strong> å‘ä¸–ç•Œå±•ç¤ºï¼Œæœªæ¥å°†æ”¯æŒæ›´å¤šå¹³å°</p>
<p>ğŸ’¬  ä½ å¯ä»¥è¿›è¡Œç®€å•çš„é…ç½®ï¼Œæ¥å…¥ <a href="https://github.com/gitalk/gitalk">Gitalk</a> æˆ– <a href="https://github.com/SukkaW/DisqusJS">DisqusJS</a> è¯„è®ºç³»ç»Ÿ</p>
<p>ğŸ‡¬ğŸ‡§  ä½ å¯ä»¥ä½¿ç”¨<strong>ä¸­æ–‡ç®€ä½“</strong>æˆ–<strong>è‹±è¯­</strong></p>
<p>ğŸŒ  ä½ å¯ä»¥ä»»æ„ä½¿ç”¨åº”ç”¨å†…é»˜è®¤ä¸»é¢˜æˆ–ä»»æ„ç¬¬ä¸‰æ–¹ä¸»é¢˜ï¼Œå¼ºå¤§çš„ä¸»é¢˜è‡ªå®šä¹‰èƒ½åŠ›</p>
<p>ğŸ–¥  ä½ å¯ä»¥è‡ªå®šä¹‰æºæ–‡ä»¶å¤¹ï¼Œåˆ©ç”¨ OneDriveã€ç™¾åº¦ç½‘ç›˜ã€iCloudã€Dropbox ç­‰è¿›è¡Œå¤šè®¾å¤‡åŒæ­¥</p>
<p>ğŸŒ± å½“ç„¶ <strong>Gridea</strong> è¿˜å¾ˆå¹´è½»ï¼Œæœ‰å¾ˆå¤šä¸è¶³ï¼Œä½†è¯·ç›¸ä¿¡ï¼Œå®ƒä¼šä¸åœå‘å‰ ğŸƒ</p>
<p>æœªæ¥ï¼Œå®ƒä¸€å®šä¼šæˆä¸ºä½ ç¦»ä¸å¼€çš„ä¼™ä¼´</p>
<p>å°½æƒ…å‘æŒ¥ä½ çš„æ‰åå§ï¼</p>
<p>ğŸ˜˜ Enjoy~</p>
]]></content>
    </entry>
</feed>